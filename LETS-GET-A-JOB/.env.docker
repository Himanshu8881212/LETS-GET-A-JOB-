# Docker Environment Configuration for LETS-GET-A-JOB
# This file contains environment variables for the Docker deployment

# ============================================================================
# n8n Configuration
# ============================================================================

# n8n Host and Port
N8N_HOST=0.0.0.0
N8N_PORT=5678
N8N_PROTOCOL=http

# Webhook URL (internal Docker network)
WEBHOOK_URL=http://n8n:5678/

# n8n Editor Base URL (for accessing from browser)
N8N_EDITOR_BASE_URL=http://localhost:5678

# Timezone
GENERIC_TIMEZONE=America/New_York

# Database Type (SQLite for simplicity)
DB_TYPE=sqlite
DB_SQLITE_VACUUM_ON_STARTUP=true

# User Management (disabled for single-user setup)
N8N_USER_MANAGEMENT_DISABLED=true

# Community Packages
N8N_COMMUNITY_PACKAGES_ENABLED=true

# Execution Settings
EXECUTIONS_DATA_SAVE_ON_ERROR=all
EXECUTIONS_DATA_SAVE_ON_SUCCESS=all
EXECUTIONS_DATA_SAVE_MANUAL_EXECUTIONS=true

# Log Level
N8N_LOG_LEVEL=info

# ============================================================================
# Next.js Application Configuration
# ============================================================================

# Node Environment
NODE_ENV=production

# n8n Webhook URLs (internal Docker network)
# These URLs are used by the Next.js app to communicate with n8n
NEXT_PUBLIC_N8N_JD_WEBHOOK_URL=http://n8n:5678/webhook/process-jd
NEXT_PUBLIC_N8N_RESUME_WEBHOOK_URL=http://n8n:5678/webhook/process-resume
NEXT_PUBLIC_N8N_COVER_LETTER_WEBHOOK_URL=http://n8n:5678/webhook/process-cover-letter
NEXT_PUBLIC_N8N_EVALUATION_WEBHOOK_URL=http://n8n:5678/webhook/evaluate-ats

# Timeout Settings (in milliseconds)
NEXT_PUBLIC_N8N_TIMEOUT=120000

# Debug Mode
NEXT_PUBLIC_DEBUG_N8N=false

# ============================================================================
# Optional: External Access Configuration
# ============================================================================

# If you want to access the application from outside localhost,
# uncomment and set these variables:

# NEXT_PUBLIC_N8N_JD_WEBHOOK_URL=http://YOUR_SERVER_IP:5678/webhook/process-jd
# NEXT_PUBLIC_N8N_RESUME_WEBHOOK_URL=http://YOUR_SERVER_IP:5678/webhook/process-resume
# NEXT_PUBLIC_N8N_COVER_LETTER_WEBHOOK_URL=http://YOUR_SERVER_IP:5678/webhook/process-cover-letter
# NEXT_PUBLIC_N8N_EVALUATION_WEBHOOK_URL=http://YOUR_SERVER_IP:5678/webhook/evaluate-ats

# ============================================================================
# Notes
# ============================================================================

# 1. The internal Docker network uses service names (e.g., http://n8n:5678)
# 2. External access uses localhost or your server IP (e.g., http://localhost:5678)
# 3. All data is persisted in Docker volumes (n8n_data and app_data)
# 4. To reset everything, run: docker-compose down -v

